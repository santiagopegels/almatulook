(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{"4iuv":function(e,t,r){"use strict";r.r(t);var n=r("L2JU");function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var i={components:{RolesList:function(){return Promise.all([r.e(0),r.e(11)]).then(r.bind(null,"QoMz"))},RolesForm:function(){return Promise.all([r.e(0),r.e(11)]).then(r.bind(null,"rA5X"))}},props:{title:{type:String,required:!0}},data:function(){return{}},created:function(){},mounted:function(){},computed:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},Object(n.b)(["isLoading"])),methods:{}},o=r("KHd+"),c=Object(o.a)(i,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"row justify-content-md-center"},[t("div",{staticClass:"col-lg-9 col-md-12 col-sm-12 col-xs-12"},[t("div",{staticClass:"card card-accent-primary"},[t("div",{staticClass:"card-header"},[t("i",{staticClass:"icon-list"}),this._v("\n\t\t\t\t"+this._s(this.title)+"\n\t\t\t")]),this._v(" "),t("div",{staticClass:"card-body"},[this._m(0),this._v(" "),t("roles-list")],1)])]),this._v(" "),t("div",{staticClass:"col-lg-3 col-md-12 col-sm-12 col-xs-12"},[t("roles-form")],1)])}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"row justify-content-end mb-4"},[t("div",{staticClass:"col-lg-6 col-md-8 col-sm-12 col-xs-12"})])}],!1,null,null,null);t.default=c.exports},QoMz:function(e,t,r){"use strict";r.r(t);var n=r("o0o1"),s=r.n(n),a=r("L2JU"),i=r("kGIl"),o=r.n(i),c=(r("5A0h"),r("LvDl"));function l(e,t,r,n,s,a,i){try{var o=e[a](i),c=o.value}catch(e){return void r(e)}o.done?t(c):Promise.resolve(c).then(n,s)}function u(e){return function(){var t=this,r=arguments;return new Promise((function(n,s){var a=e.apply(t,r);function i(e){l(a,n,s,i,o,"next",e)}function o(e){l(a,n,s,i,o,"throw",e)}i(void 0)}))}}function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){m(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var f={props:{},data:function(){return{opacity:.3,model:"roles",model_name:"rol"}},created:function(){},mounted:function(){this.fetch()},computed:p(p({},Object(a.b)(["roles","isLoading","selected_role","selected_user","page"])),{},{page:{set:function(e){this.$store.state.page=e},get:function(){return this.$store.state.page}},hasRoles:function(){return Boolean(this.roles.data)},getRoles:function(){return this.orderedRoles()},getLastPage:function(){return this.roles.last_page},getTotal:function(){return this.roles.total}}),components:{Loading:o.a},methods:{handleSubmitDelete:function(e,t){var r=this;return u(s.a.mark((function n(){return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.preventDefault(),!(!t.id>0)){n.next=3;break}return n.abrupt("return");case 3:return n.next=5,r.delete(t);case 5:case"end":return n.stop()}}),n)})))()},fetch:function(){var e=this;return u(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("fetch",{model:e.model,page:e.page}).catch((function(t){return e.$toasted.global.ToastedError({message:t.message.message})}));case 2:case"end":return t.stop()}}),t)})))()},delete:function(e){var t=this;return u(s.a.mark((function r(){return s.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.$store.dispatch("delete",{_method:"DELETE",model:t.model,data:e}).then(function(){var e=u(s.a.mark((function e(r){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.$toasted.global.ToastedSuccess({message:"El ".concat(t.model_name," fue eliminado!")}),e.next=3,t.fetch();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return t.$toasted.global.ToastedError({message:e.message.message})}));case 2:case"end":return r.stop()}}),r)})))()},restore:function(e){var t=this;return u(s.a.mark((function r(){return s.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.$store.dispatch("restore",{model:t.model,data:e}).then(function(){var e=u(s.a.mark((function e(r){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.$toasted.global.ToastedSuccess({message:"El ".concat(t.model_name," fue restaurado!")}),e.next=3,t.fetch();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return t.$toasted.global.ToastedError({message:e.message.message})}));case 2:case"end":return r.stop()}}),r)})))()},orderedRoles:function(){return Object(c.orderBy)(this.roles.data,"id")},selectedRole:function(e){var t=this;return u(s.a.mark((function r(){return s.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=t.$store,r.t1=e.id,r.t2=e.name,r.t3=e.display_name,r.t4=e.description,r.next=7,t.getModelsIds(e.permissions);case 7:return r.t5=r.sent,r.t6={id:r.t1,name:r.t2,display_name:r.t3,description:r.t4,permissionsIds:r.t5},r.next=11,r.t0.commit.call(r.t0,"SET_SELECTED_ROLE",r.t6);case 11:case"end":return r.stop()}}),r)})))()},getModelsIds:function(e){return u(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return",[]);case 2:return t.abrupt("return",e.map((function(e){return e.id})));case 3:case"end":return t.stop()}}),t)})))()},clickCallback:function(e){var t=this;return u(s.a.mark((function r(){return s.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t.page=e,r.next=3,t.fetch();case 3:case"end":return r.stop()}}),r)})))()}}},h=r("KHd+"),v=Object(h.a)(f,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"table-responsive"},[r("loading",{attrs:{opacity:e.opacity,loader:"spinner",transition:"fade",active:e.isLoading,"can-cancel":!1,"is-full-page":!0,color:"#20a8d8","background-color":"rgba(0,0,0,0.8)"},on:{"update:active":function(t){e.isLoading=t}}}),e._v(" "),r("table",{staticClass:"table table-condensed table-striped table-hover",attrs:{id:"roles-table"}},[e._m(0),e._v(" "),e.hasRoles?r("tbody",e._l(e.getRoles,(function(t){return r("tr",{key:t.id,class:{"table-danger":t.deleted_at}},[r("td",{attrs:{scope:"row"}},[e._v(e._s(t.id))]),e._v(" "),r("td",[e._v(e._s(t.display_name))]),e._v(" "),r("td",[r("span",{staticClass:"badge"},[e._v(e._s(t.name))])]),e._v(" "),r("td",[e._v(e._s(t.description))]),e._v(" "),r("td",{staticClass:"text-center"},[r("form",{attrs:{method:"POST","accept-charset":"UTF-8"},on:{submit:function(r){return e.handleSubmitDelete(r,t)}}},[r("div",[r("button",{staticClass:"btn btn-outline-warning btn-sm",attrs:{title:"Editar",disabled:t.deleted_at,type:"button"},on:{click:function(r){return e.selectedRole(t)}}},[r("i",{staticClass:"icon-note"})]),e._v(" "),t.deleted_at?r("button",{staticClass:"btn btn-success btn-sm",attrs:{title:"Restaurar",type:"button"},on:{click:function(r){return e.restore(t)}}},[r("i",{staticClass:"icon-refresh"})]):r("button",{staticClass:"btn btn-outline-danger btn-sm",attrs:{title:"Eliminar",type:"submit",onclick:"return confirm('¿Estás seguro de que quieres eliminar este elemento?')"}},[r("i",{staticClass:"icon-trash"})])])])])])})),0):e._e()]),e._v(" "),e.hasRoles?r("section",{staticClass:"col-lg-12 col-sm-12 col-md-12 col-xs-12 center-block text-center d-flex justify-content-center"},[r("paginate",{attrs:{"page-count":e.getLastPage,"page-range":5,"margin-pages":2,"click-handler":e.clickCallback,"prev-text":"&laquo;","next-text":"&raquo;","container-class":"pagination","page-class":"page-item","page-link-class":"page-link","prev-class":"page-item","next-class":"page-item","prev-link-class":"page-link","next-link-class":"page-link","active-class":"active"},model:{value:e.page,callback:function(t){e.page=t},expression:"page"}})],1):e._e()],1)}),[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("thead",{staticClass:"thead-dark"},[r("tr",[r("th",{attrs:{scope:"col"}},[e._v("ID")]),e._v(" "),r("th",{attrs:{scope:"col"}},[e._v("Nombre del rol")]),e._v(" "),r("th",{attrs:{scope:"col"}},[e._v("Slug")]),e._v(" "),r("th",{attrs:{scope:"col"}},[e._v("Descripción")]),e._v(" "),r("th",{staticClass:"text-center",attrs:{scope:"col"}},[r("i",{staticClass:"icon-settings"})])])])}],!1,null,null,null);t.default=v.exports},frNm:function(e,t,r){"use strict";r.r(t);var n=r("L2JU");function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var o={props:{},data:function(){return{model_name:"permiso"}},created:function(){},mounted:function(){this.fetchPermissionsAll()},computed:a(a({},Object(n.b)(["isLoading","permissions","selected_role"])),{},{permissionsIds:{set:function(e){this.$store.state.selected_role.permissionsIds=e},get:function(){return this.$store.state.selected_role.permissionsIds}},hasPermissions:function(){return Boolean(this.permissions)},getPermissions:function(){return this.permissions}}),methods:{fetchPermissionsAll:function(){var e=this;return this.$store.dispatch("fetchPermissionsAll").catch((function(t){return e.$toasted.global.ToastedError({message:t.message.message})}))}}},c=r("KHd+"),l=Object(c.a)(o,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"name"}},[e._v("Asignar permisos")]),e._v(" "),e.hasPermissions?r("div",{staticClass:"form-group scroll-vertical"},e._l(e.getPermissions,(function(t){return r("div",{key:t.id,staticClass:"form-check form-check-inline mr-4 mb-2 mb-2 pointer"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.permissionsIds,expression:"permissionsIds"}],staticClass:"form-check-input pointer",attrs:{type:"checkbox",id:t.id},domProps:{value:t.id,checked:Array.isArray(e.permissionsIds)?e._i(e.permissionsIds,t.id)>-1:e.permissionsIds},on:{change:function(r){var n=e.permissionsIds,s=r.target,a=!!s.checked;if(Array.isArray(n)){var i=t.id,o=e._i(n,i);s.checked?o<0&&(e.permissionsIds=n.concat([i])):o>-1&&(e.permissionsIds=n.slice(0,o).concat(n.slice(o+1)))}else e.permissionsIds=a}}}),e._v(" "),r("label",{staticClass:"form-check-label pointer",attrs:{for:t.id}},[e._v(e._s(t.display_name))])])})),0):e._e()])}),[],!1,null,null,null);t.default=l.exports},rA5X:function(e,t,r){"use strict";r.r(t);var n=r("o0o1"),s=r.n(n),a=r("L2JU"),i=r("ta7f");function o(e,t,r,n,s,a,i){try{var o=e[a](i),c=o.value}catch(e){return void r(e)}o.done?t(c):Promise.resolve(c).then(n,s)}function c(e){return function(){var t=this,r=arguments;return new Promise((function(n,s){var a=e.apply(t,r);function i(e){o(a,n,s,i,c,"next",e)}function c(e){o(a,n,s,i,c,"throw",e)}i(void 0)}))}}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var p={components:{PermissionsCheckbox:function(){return Promise.all([r.e(0),r.e(11)]).then(r.bind(null,"frNm"))}},data:function(){return{submitted:!1,model:"roles",model_name:"rol"}},validations:function(){return this.hasSelectedId()?{selected_role:{id:{required:i.required,integer:i.integer},name:{minLength:Object(i.minLength)(2)},display_name:{required:i.required,minLength:Object(i.minLength)(2)},description:{minLength:Object(i.minLength)(2)}}}:{selected_role:{name:{minLength:Object(i.minLength)(2)},display_name:{required:i.required,minLength:Object(i.minLength)(2)},description:{minLength:Object(i.minLength)(2)}}}},created:function(){},mounted:function(){},computed:u(u({},Object(a.b)(["isLoading","selected_role","page"])),{},{hasId:function(){return Boolean(this.hasSelectedId())},getTitle:function(){return this.hasSelectedId()?"Editar rol":"Crear nuevo rol"},buttonText:function(){return this.hasSelectedId()?"Actualizar rol":"Crear rol"}}),methods:{hasSelectedId:function(){return!!Boolean(this.selected_role)&&Boolean(this.selected_role.id>0)},changeDisplayName:function(e){},hyphenateName:function(){this.selected_role.name=this.hyphenate(this.selected_role.display_name)},handleSubmit:function(e){if(e.preventDefault(),this.submitted=!0,this.$v.$touch(),!this.$v.$invalid)return this.hasSelectedId()?this.update():this.store()},store:function(){var e=this;return c(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("store",{model:e.model,data:{name:e.hyphenate(e.selected_role.display_name),display_name:e.selected_role.display_name,description:e.selected_role.description,permissionsIds:e.selected_role.permissionsIds}}).then(function(){var t=c(s.a.mark((function t(r){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.$v.$reset(),e.$toasted.global.ToastedSuccess({message:"El ".concat(e.model_name," fue creado!")}),t.next=4,e.fetch();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){return e.$toasted.global.ToastedError({message:t.message.message})}));case 2:case"end":return t.stop()}}),t)})))()},update:function(){var e=this;return c(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("update",{model:e.model,data:{_method:"PUT",id:e.selected_role.id,name:e.hyphenate(e.selected_role.display_name),display_name:e.selected_role.display_name,description:e.selected_role.description,permissionsIds:e.selected_role.permissionsIds}}).then(function(){var t=c(s.a.mark((function t(r){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.$v.$reset(),e.$toasted.global.ToastedSuccess({message:"El ".concat(e.model_name," fue actualizado!")}),t.next=4,e.fetch();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){return e.$toasted.global.ToastedError({message:t.message.message})}));case 2:case"end":return t.stop()}}),t)})))()},fetch:function(){var e=this;return c(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("fetch",{model:e.model,page:e.page}).catch((function(t){return e.$toasted.global.ToastedError({message:t.message.message})}));case 2:case"end":return t.stop()}}),t)})))()},cancelSelectedRole:function(){var e=this;return c(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.$store.commit("SET_SELECTED_ROLE"),e.$v.$reset();case 2:case"end":return t.stop()}}),t)})))()},hyphenate:function(e){if(e)return e.replace(/[^a-zA-Z0-9]/g,"-").toLowerCase()}}},m=r("KHd+"),f=Object(m.a)(p,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{class:{"card card-accent-warning":e.hasId,"card card-accent-primary":!e.hasId}},[r("div",{staticClass:"card-header"},[r("i",{staticClass:"icon-user-follow",class:{"icon-settings":e.hasId,"icon-plus":!e.hasId}}),e._v("\n\t\t"+e._s(e.getTitle)+"\n\t\t"),r("span",{staticClass:"float-right"},[e.hasId?r("span",{staticClass:"badge badge-warning"},[e._v("\n\t\t\t\tID\n\t\t\t\t"),r("strong",[e._v(e._s(e.selected_role.id))])]):e._e(),e._v(" "),e.hasId?r("span",{staticClass:"ml-1"},[r("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"alert","aria-label":"Close"},on:{click:function(t){return e.cancelSelectedRole()}}},[r("span",{attrs:{"aria-hidden":"true"}},[e._v("×")])])]):e._e()])]),e._v(" "),r("div",{staticClass:"card-body"},[r("form",{attrs:{method:"POST","accept-charset":"UTF-8"},on:{submit:e.handleSubmit}},[r("div",{staticClass:"form-group"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.selected_role.name,expression:"selected_role.name"}],staticClass:"form-control",class:{"is-invalid":e.submitted&&e.$v.selected_role.name.$error},attrs:{type:"hidden",id:"name",name:"name",readonly:""},domProps:{value:e.selected_role.name},on:{input:function(t){t.target.composing||e.$set(e.selected_role,"name",t.target.value)}}})]),e._v(" "),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"name"}},[e._v("Nombre del rol")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.selected_role.display_name,expression:"selected_role.display_name"},{name:"capitalize",rawName:"v-capitalize"}],staticClass:"form-control",class:{"is-invalid":e.submitted&&e.$v.selected_role.display_name.$error},attrs:{type:"text",id:"display_name",name:"display_name"},domProps:{value:e.selected_role.display_name},on:{input:[function(t){t.target.composing||e.$set(e.selected_role,"display_name",t.target.value)},e.changeDisplayName]}}),e._v(" "),e.submitted&&!e.$v.selected_role.display_name.required?r("div",{staticClass:"invalid-feedback"},[e._v("El nombre del rol es requerido.")]):e._e()]),e._v(" "),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"name"}},[e._v("Descripción")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.selected_role.description,expression:"selected_role.description"},{name:"capitalize",rawName:"v-capitalize"}],staticClass:"form-control",class:{"is-invalid":e.submitted&&e.$v.selected_role.description.$error},attrs:{type:"text",id:"description",name:"description"},domProps:{value:e.selected_role.description},on:{input:function(t){t.target.composing||e.$set(e.selected_role,"description",t.target.value)}}}),e._v(" "),e.submitted&&!e.$v.selected_role.description.required?r("div",{staticClass:"invalid-feedback"},[e._v("La descripción es requerida.")]):e._e()]),e._v(" "),r("permissions-checkbox"),e._v(" "),r("div",{staticClass:"form-group"},[r("div",[r("button",{class:{invalid:e.$v.$invalid,"btn btn-warning btn-block":e.hasId,"btn btn-success btn-block":!e.hasId},attrs:{type:"submit"}},[e._v(e._s(e.buttonText))]),e._v(" "),r("button",{staticClass:"btn btn-secondary btn-block",attrs:{type:"button"},on:{click:function(t){return e.cancelSelectedRole()}}},[e._v("Cancelar")])])])],1)])])}),[],!1,null,null,null);t.default=f.exports}}]);