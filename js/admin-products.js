(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"1V+D":function(t,e){t.exports="/images/default-image.jpg?302725c5fc92a721aa64a13039bb867f"},"1lUx":function(t,e,r){"use strict";r.r(e);var n=r("o0o1"),a=r.n(n),c=r("L2JU");function s(t,e,r,n,a,c,s){try{var o=t[c](s),i=o.value}catch(t){return void r(t)}o.done?e(i):Promise.resolve(i).then(n,a)}function o(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function i(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var u={components:{ProductsList:function(){return Promise.all([r.e(0),r.e(17),r.e(8)]).then(r.bind(null,"fsSJ"))},ProductsCard:function(){return Promise.all([r.e(0),r.e(17),r.e(8)]).then(r.bind(null,"LzZn"))},ProductsFilters:function(){return Promise.all([r.e(0),r.e(17),r.e(8)]).then(r.bind(null,"qSuy"))}},computed:function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?o(Object(r),!0).forEach((function(e){i(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},Object(c.b)(["isLoading","selected_product"])),methods:{createNewProduct:function(){var t,e=this;return(t=a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$store.commit("SET_SELECTED_PRODUCT");case 2:return t.next=4,e.$store.commit("SET_SELECTED_CATEGORY");case 4:e.$router.push({name:"productForm"});case 5:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,a){var c=t.apply(e,r);function o(t){s(c,n,a,o,i,"next",t)}function i(t){s(c,n,a,o,i,"throw",t)}o(void 0)}))})()}}},l=r("KHd+"),d=Object(l.a)(u,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"row"},[r("div",{staticClass:"col-sm-12 col-xs-12",class:{"col-lg-9 col-md-9":t.selected_product.id,"col-lg-12 col-md-12":!t.selected_product.id}},[r("div",{staticClass:"card card-accent-primary"},[r("div",{staticClass:"card-header d-flex justify-content-between align-items-center"},[t._m(0),t._v(" "),r("div",{staticClass:"align-item-center"},[r("button",{staticClass:"btn btn-success",on:{click:function(e){return t.createNewProduct()}}},[r("i",{staticClass:"icon-plus"}),r("span",[t._v(" Nuevo Producto")])])])]),t._v(" "),r("div",{staticClass:"card-body"},[r("div",{staticClass:"row justify-content-end mb-4"},[r("div",{staticClass:"col-lg-6 col-md-8 col-sm-12 col-xs-12"},[r("products-filters")],1)]),t._v(" "),r("products-list")],1)])]),t._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:t.selected_product.id,expression:"selected_product.id"}],staticClass:"col-lg-3 col-md-12 col-sm-12 col-xs-12"},[r("products-card")],1)])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"align-item-center"},[e("i",{staticClass:"icon-list"}),this._v("\n                Productos\n                ")])}],!1,null,null,null);e.default=d.exports},"4bYf":function(t,e,r){(t.exports=r("I1BE")(!1)).push([t.i,".scrolling-wrapper[data-v-ce7199f8]{overflow-x:auto}",""])},"5+11":function(t,e,r){"use strict";r.r(e);var n=r("L2JU");function a(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function c(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var s={components:{NewProductForm:function(){return Promise.all([r.e(0),r.e(17),r.e(8)]).then(r.bind(null,"j5wz"))},ProductsCard:function(){return Promise.all([r.e(0),r.e(17),r.e(8)]).then(r.bind(null,"LzZn"))}},props:{},data:function(){return{}},created:function(){},mounted:function(){},computed:function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?a(Object(r),!0).forEach((function(e){c(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},Object(n.b)(["isLoading"])),methods:{}},o=r("KHd+"),i=Object(o.a)(s,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"row"},[e("div",{staticClass:"col-lg-9 col-md-12 col-sm-12 col-xs-12"},[e("new-product-form")],1),this._v(" "),e("div",{staticClass:"col-lg-3 col-md-12 col-sm-12 col-xs-12"},[e("products-card")],1)])}),[],!1,null,null,null);e.default=i.exports},EVUX:function(t,e,r){"use strict";r.r(e);var n=r("o0o1"),a=r.n(n),c=r("/Fx5");function s(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:400,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:350;return new Promise((function(n){var a=new Image;a.src=t,a.onload=function(){var t=document.createElement("canvas"),c=e,s=r,o=a.width,i=a.height;o>i?o>c&&(i*=c/o,o=c):i>s&&(o*=s/i,i=s),t.width=o,t.height=i,t.getContext("2d").drawImage(a,0,0,o,i),n(t.toDataURL("image/jpeg"))}}))}function o(t,e,r,n,a,c,s){try{var o=t[c](s),i=o.value}catch(t){return void r(t)}o.done?e(i):Promise.resolve(i).then(n,a)}function i(t){return function(){var e=this,r=arguments;return new Promise((function(n,a){var c=t.apply(e,r);function s(t){o(c,n,a,s,i,"next",t)}function i(t){o(c,n,a,s,i,"throw",t)}s(void 0)}))}}var u={props:{limit:{type:Number,default:5},editImages:{type:Array,default:[]}},data:function(){return{images:[],miniatureImages:[]}},components:{VueUploadMultipleImage:c.a},mounted:function(){var t=this;return i(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.editImages.length>0)){e.next=3;break}return e.next=3,t.editImages.forEach((function(e){s(e,1200,1400).then((function(e){t.miniatureImages.push({default:1,highlight:1,name:(new Date).getTime(),path:e})}))}));case 3:case"end":return e.stop()}}),e)})))()},computed:{},watch:{},methods:{updateFileList:function(t){var e=this;return i(a.a.mark((function r(){return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=e,r.next=3,e.parserImages(t);case 3:r.t1=r.sent,r.t0.$emit.call(r.t0,"on-upload-images",r.t1);case 5:case"end":return r.stop()}}),r)})))()},parserImages:function(t){var e=this;return i(a.a.mark((function r(){var n;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t){r.next=2;break}return r.abrupt("return",[]);case 2:return n=Object.values(t),e.images=[],n.forEach((function(t){e.images.push({name:(new Date).getTime(),extension:"data:image/png;base64",mime_type:"data:image/png;base64",binary:t.path})})),r.abrupt("return",e.images);case 6:case"end":return r.stop()}}),r)})))()},uploadImageSuccess:function(t,e,r){var n=this;return i(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s(r[e].path,1200,1400).then((function(t){r[e].path=t}));case 2:return n.miniatureImages.push(r[e]),t.next=5,n.updateFileList(r);case 5:case"end":return t.stop()}}),t)})))()},beforeRemove:function(t,e,r){var n=this;return i(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(1!=confirm("¿Estás seguro de que quieres eliminar este elemento?")){t.next=5;break}return e(),t.next=5,n.updateFileList(r);case 5:case"end":return t.stop()}}),t)})))()},editImage:function(t,e,r){var n=this;return i(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.updateFileList(r);case 2:case"end":return t.stop()}}),t)})))()},dataChange:function(t){},limitExceeded:function(t){}}},l=r("KHd+"),d=Object(l.a)(u,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"images-upload"},[r("vue-upload-multiple-image",{attrs:{dragText:"Arrastrar y soltar aquí las imágenes",browseText:t.limit>1?"Seleccionar las imágenes":"Seleccionar la imágen",primaryText:"Seleccione",markIsPrimaryText:"Establecer Foto Principal",popupText:"Esta imagen se mostrará por defecto",dropText:"Suelta tu archivo aquí ...",accept:"image/gif, image/jpeg, image/png, image/bmp, image/jpg, image/svg",multiple:t.limit>1,showPrimary:!0,maxImage:t.limit,"data-images":t.miniatureImages},on:{"upload-success":t.uploadImageSuccess,"before-remove":t.beforeRemove,"edit-image":t.editImage,"data-change":t.dataChange}})],1)}),[],!1,null,null,null);e.default=d.exports},LzZn:function(t,e,r){"use strict";r.r(e);var n=r("o0o1"),a=r.n(n),c=r("L2JU"),s=r("1V+D"),o=r.n(s);function i(t,e,r,n,a,c,s){try{var o=t[c](s),i=o.value}catch(t){return void r(t)}o.done?e(i):Promise.resolve(i).then(n,a)}function u(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function l(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var d={data:function(){return{image:o.a,model:"products",model_name:"producto",index:0}},computed:function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?u(Object(r),!0).forEach((function(e){l(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},Object(c.b)(["selected_product","selected_category"])),methods:{showImageByIndex:function(t){this.index=t},cancelSelectedObject:function(){var t,e=this;return(t=a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$store.commit("SET_SELECTED_PRODUCT");case 2:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,a){var c=t.apply(e,r);function s(t){i(c,n,a,s,o,"next",t)}function o(t){i(c,n,a,s,o,"throw",t)}s(void 0)}))})()}}},p=(r("XHlB"),r("KHd+")),m=Object(p.a)(d,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"card mb-3"},[t.selected_product.id?r("span",{staticClass:"mr-1"},[r("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"alert","aria-label":"Close"},on:{click:function(e){return t.cancelSelectedObject()}}},[r("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])]):t._e(),t._v(" "),r("div",{staticClass:"item-img-container"},[t.selected_product.images[t.index]?r("img",{staticClass:"card-img-top card-img-top-custom",attrs:{src:t.selected_product.id?t.selected_product.images[t.index]:t.selected_product.images[t.index].binary,alt:"Imagen"}}):r("img",{staticClass:"card-img-top card-img-top-custom",attrs:{src:t.image,alt:"Imagen"}})]),t._v(" "),t.selected_product.images&&t.selected_product.images.length>0?r("div",{staticClass:"container-fluid scrolling-wrapper justify-content-center"},[r("div",{staticClass:"row flex-row flex-nowrap"},t._l(t.selected_product.images,(function(e,n){return r("div",{key:n,staticClass:"col-3"},[r("figure",{staticClass:"figure d-inline-flex"},[r("img",{staticClass:"images-thumb-card",attrs:{src:t.selected_product.id?e:e.binary,alt:"..."},on:{click:function(e){return t.showImageByIndex(n)}}})])])})),0)]):t._e(),t._v(" "),r("div",{staticClass:"card-body mb-0"},[r("h5",{staticClass:"card-title text-truncate"},[t._v(t._s(t.selected_product.name?t.selected_product.name:"-"))]),t._v(" "),r("hr"),t._v(" "),r("div",{staticClass:"w-100"},[r("p",{staticClass:"mb-0"},[t._v("Categoría:")]),t._v(" "),t.selected_category.id?r("h5",{staticClass:"text-truncate"},[t._v(t._s(t.selected_category.name))]):r("h5",{staticClass:"text-truncate"},[t._v("-")])]),t._v(" "),r("div",{staticClass:"w-100"},[r("p",{staticClass:"mb-0"},[t._v("Precio de Venta:")]),t._v(" "),t.selected_product.price?r("h5",{staticClass:"text-truncate"},[t._v(t._s(t._f("currency")(t.selected_product.price)))]):r("h5",{staticClass:"text-truncate"},[t._v("-")])]),t._v(" "),r("div",{staticClass:"w-100"},[r("p",{staticClass:"mb-0"},[t._v("Precio de Costo:")]),t._v(" "),t.selected_product.cost_price?r("h5",{staticClass:"text-truncate"},[t._v("\n                "+t._s(t._f("currency")(t.selected_product.cost_price)))]):r("h5",{staticClass:"text-truncate"},[t._v("-")])]),t._v(" "),r("div",{staticClass:"scroll-vertical justify-content-center"},t._l(t.selected_product.attributes,(function(e,n){return r("div",{key:n,staticClass:"text-center"},[t._l(e,(function(e,n){return r("div",{key:n},t._l(e,(function(n,a){return e.length?r("div",{key:a},[t._v("\n                        "+t._s(n.attribute)+": "+t._s(n.value)+"\n                    ")]):t._e()})),0)})),t._v("\n                Stock: "+t._s(e.stock)+"\n                "),r("hr")],2)})),0)])])}),[],!1,null,"ce7199f8",null);e.default=m.exports},MELZ:function(t,e,r){"use strict";r.r(e);var n=r("o0o1"),a=r.n(n),c=r("L2JU"),s=r("yhet");function o(t,e,r,n,a,c,s){try{var o=t[c](s),i=o.value}catch(t){return void r(t)}o.done?e(i):Promise.resolve(i).then(n,a)}function i(t){return function(){var e=this,r=arguments;return new Promise((function(n,a){var c=t.apply(e,r);function s(t){o(c,n,a,s,i,"next",t)}function i(t){o(c,n,a,s,i,"throw",t)}s(void 0)}))}}function u(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function l(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?u(Object(r),!0).forEach((function(e){d(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function d(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var p={components:{Treeselect:r.n(s).a},data:function(){return{stockData:[],attributesStockData:[],firstTimeEditProduct:!0}},computed:l(l({},Object(c.b)(["selected_category","isLoading","page","selected_product"])),{},{hasCategories:function(){return Boolean(this.selected_category.id>0)}}),watch:{selected_category:function(){var t=this;return i(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.selected_category.id){e.next=3;break}return e.next=3,t.addStockData();case 3:case"end":return e.stop()}}),e)})))()}},methods:{normalizer:function(t){return{id:t.id,label:t.name}},addStockData:function(){var t=this;return i(a.a.mark((function e(){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={},e.next=3,t.selected_category.attributesIds.forEach((function(e){return t.attributesStockData[e.name]=[]}));case 3:return(r=l({},t.attributesStockData)).stock=1,e.next=7,t.$store.commit("PUSH_STOCK_DATA_PRODUCT",r);case 7:case"end":return e.stop()}}),e)})))()},removeElement:function(t){var e=this;return i(a.a.mark((function r(){return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:e.selected_product.stocks.splice(t,1);case 1:case"end":return r.stop()}}),r)})))()}}},m=r("KHd+"),f=Object(m.a)(p,(function(){var t=this,e=this,r=e.$createElement,n=e._self._c||r;return n("div",{directives:[{name:"show",rawName:"v-show",value:e.hasCategories,expression:"hasCategories"}],staticClass:"content-dashed"},[e._l(e.selected_product.stocks,(function(t,r){return n("div",{key:r,staticClass:"form-row justify-content-center"},[e._l(e.selected_category.attributesIds,(function(t,a){return n("div",{key:a,staticClass:"form-group col-lg-3 col-xs-12"},[n("label",{staticClass:"text-justify text-dark"},[e._v(e._s(t.name))]),e._v(" "),n("treeselect",{attrs:{multiple:"",normalizer:e.normalizer,options:t.values,name:"attribute['"+r+"']"+t.name,id:"attribute['"+r+"']"+t.name},model:{value:e.selected_product.stocks[r][t.name],callback:function(n){e.$set(e.selected_product.stocks[r],t.name,n)},expression:"selected_product.stocks[stockDataIndex][attribute.name]"}})],1)})),e._v(" "),n("div",{staticClass:"form-group col-lg-2"},[n("label",{attrs:{for:"stock"}},[e._v("Stock")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.selected_product.stocks[r].stock,expression:"selected_product.stocks[stockDataIndex].stock"}],staticClass:"form-control",attrs:{type:"number",id:"stock",name:"stock",name:"attribute['"+r+"']stock",id:"attribute['"+r+"']stock"},domProps:{value:e.selected_product.stocks[r].stock},on:{input:function(t){t.target.composing||e.$set(e.selected_product.stocks[r],"stock",t.target.value)}}})]),e._v(" "),n("button",{staticClass:"close align-items-center pt-2",attrs:{type:"button",title:"Eliminar"},on:{click:function(t){return e.removeElement(r)}}},[n("i",{staticClass:"icon-close"})])],2)})),e._v(" "),n("span",{staticClass:"border-bottom"}),e._v(" "),n("div",{staticClass:"text-center mt-2"},[n("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(){return t.addStockData()}}},[e._v("\n            Agregar Stock\n        ")])])],2)}),[],!1,null,null,null);e.default=f.exports},XHlB:function(t,e,r){"use strict";r("dG70")},dG70:function(t,e,r){var n=r("4bYf");"string"==typeof n&&(n=[[t.i,n,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};r("aET+")(n,a);n.locals&&(t.exports=n.locals)},fsSJ:function(t,e,r){"use strict";r.r(e);var n=r("o0o1"),a=r.n(n),c=r("L2JU"),s=r("kGIl"),o=r.n(s),i=(r("5A0h"),r("LvDl"));function u(t,e,r,n,a,c,s){try{var o=t[c](s),i=o.value}catch(t){return void r(t)}o.done?e(i):Promise.resolve(i).then(n,a)}function l(t){return function(){var e=this,r=arguments;return new Promise((function(n,a){var c=t.apply(e,r);function s(t){u(c,n,a,s,o,"next",t)}function o(t){u(c,n,a,s,o,"throw",t)}s(void 0)}))}}function d(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function p(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?d(Object(r),!0).forEach((function(e){m(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function m(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var f={components:{Loading:o.a},props:{},data:function(){return{opacity:.3,model:"products",model_name:"producto",isHovering:!1}},created:function(){},mounted:function(){this.products.data||this.fetch()},computed:p(p({},Object(c.b)(["products","isLoading","page"])),{},{page:{set:function(t){this.$store.state.page=t},get:function(){return this.$store.state.page}},hasProducts:function(){return Boolean(this.products.data)},getProducts:function(){return this.orderedObjects()},getLastPage:function(){return this.products.last_page},getTotal:function(){return this.products.total}}),methods:{orderedObjects:function(){return Object(i.orderBy)(this.products.data,"id")},handleSubmitDelete:function(t,e){var r=this;return l(a.a.mark((function n(){return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t.preventDefault(),!(!e.id>0)){n.next=3;break}return n.abrupt("return");case 3:return n.next=5,r.delete(e);case 5:case"end":return n.stop()}}),n)})))()},fetch:function(){var t=this;return l(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("fetch",{model:t.model,page:t.page}).catch((function(e){return t.$toasted.global.ToastedError({message:e.message.message})}));case 2:case"end":return e.stop()}}),e)})))()},selectedObject:function(t){var e=this;return l(a.a.mark((function r(){return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=e.$store,r.t1=t.id,r.t2=t.name,r.t3=t.slug,r.next=6,e.getAttributesIds(t.attributes);case 6:return r.t4=r.sent,r.t5={id:r.t1,name:r.t2,slug:r.t3,attributesIds:r.t4},r.next=10,r.t0.commit.call(r.t0,"SET_SELECTED_PRODUCT",r.t5);case 10:case"end":return r.stop()}}),r)})))()},getAttributesIds:function(t){return l(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",[]);case 2:return e.abrupt("return",t.map((function(t){return t.id})));case 3:case"end":return e.stop()}}),e)})))()},clickCallback:function(t){var e=this;return l(a.a.mark((function r(){return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.$store.commit("SET_PAGE",t);case 2:return r.next=4,e.fetch();case 4:case"end":return r.stop()}}),r)})))()},showProduct:function(t){var e=this;return l(a.a.mark((function r(){return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.selectProductAndCategory(t);case 2:case"end":return r.stop()}}),r)})))()},editProduct:function(t){var e=this;return l(a.a.mark((function r(){return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.selectProductAndCategory(t);case 2:return r.next=4,e.$router.push({name:"productForm"});case 4:case"end":return r.stop()}}),r)})))()},selectProductAndCategory:function(t){var e=this;return l(a.a.mark((function r(){return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=e.$store,r.t1=t.id,r.t2=t.name,r.t3=Number(t.price),r.t4=Number(t.cost_price),r.t5=t.images,r.t6=t.attributes,r.next=9,e.getStockProduct(t);case 9:return r.t7=r.sent,r.t8={id:r.t1,name:r.t2,price:r.t3,cost_price:r.t4,images:r.t5,attributes:r.t6,stocks:r.t7},r.next=13,r.t0.commit.call(r.t0,"SET_SELECTED_PRODUCT",r.t8);case 13:return r.next=15,e.$store.commit("SET_SELECTED_CATEGORY",{id:t.category.id,name:t.category.name,children:t.category.children,attributesIds:t.category.attributesIds});case 15:case"end":return r.stop()}}),r)})))()},getStockProduct:function(t){return l(a.a.mark((function e(){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],e.next=3,t.attributes.forEach((function(t){var e={};t.attributes.forEach((function(t){e[t.attribute]=[],e[t.attribute][0]=t.value_id})),e.stock=Number(t.stock),r.push(e)}));case 3:return e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})))()}}},v=r("KHd+"),b=Object(v.a)(f,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"table-responsive"},[r("loading",{attrs:{opacity:t.opacity,loader:"spinner",transition:"fade",active:t.isLoading,"can-cancel":!1,"is-full-page":!0,color:"#20a8d8","background-color":"rgba(0,0,0,0.8)"},on:{"update:active":function(e){t.isLoading=e}}}),t._v(" "),r("table",{staticClass:"table table-condensed table-striped table-hover",attrs:{id:"products-table"}},[t._m(0),t._v(" "),t.hasProducts?r("tbody",t._l(t.getProducts,(function(e){return r("tr",{key:e.id,class:{"table-danger":e.deleted_at,hovering:t.isHovering},on:{mouseover:function(e){t.isHovering=!0},mouseout:function(e){t.isHovering=!1},click:function(r){return t.showProduct(e)}}},[r("td",{attrs:{scope:"row"}},[t._v(t._s(e.id))]),t._v(" "),r("td",{attrs:{scope:"row"}},[t._v(t._s(e.name))]),t._v(" "),r("td",{attrs:{scope:"row"}},[t._v(t._s(e.stock))]),t._v(" "),r("td",{attrs:{scope:"row"}},[t._v(t._s(t._f("currency")(e.cost_price)))]),t._v(" "),r("td",{attrs:{scope:"row"}},[t._v(t._s(t._f("currency")(e.price)))]),t._v(" "),r("td",{staticClass:"text-center"},[r("form",{attrs:{method:"POST","accept-charset":"UTF-8"},on:{submit:function(r){return t.handleSubmitDelete(r,e)}}},[r("button",{staticClass:"btn btn-outline-warning btn-sm",attrs:{type:"button",title:"Editar"},on:{click:function(r){return t.editProduct(e)}}},[r("i",{staticClass:"icon-note"})]),t._v(" "),e.deleted_at?t._e():r("button",{staticClass:"btn btn-outline-danger btn-sm",attrs:{title:"Eliminar",type:"submit",onclick:"return confirm('¿Estás seguro de que quieres eliminar este elemento?')"}},[r("i",{staticClass:"icon-trash"})])])])])})),0):t._e()]),t._v(" "),t.hasProducts?r("section",{staticClass:"col-lg-12 col-sm-12 col-md-12 col-xs-12 center-block text-center d-flex justify-content-center"},[r("paginate",{attrs:{"page-count":t.getLastPage,"page-range":5,"margin-pages":2,"click-handler":t.clickCallback,"prev-text":"&laquo;","next-text":"&raquo;","container-class":"pagination","page-class":"page-item","page-link-class":"page-link","prev-class":"page-item","next-class":"page-item","prev-link-class":"page-link","next-link-class":"page-link","active-class":"active"},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}})],1):t._e()],1)}),[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("thead",{staticClass:"thead-dark"},[r("tr",[r("th",{attrs:{scope:"col"}},[t._v("Código")]),t._v(" "),r("th",{attrs:{scope:"col"}},[t._v("Producto")]),t._v(" "),r("th",{attrs:{scope:"col"}},[t._v("Stock")]),t._v(" "),r("th",{attrs:{scope:"col"}},[t._v("Precio de Costo")]),t._v(" "),r("th",{attrs:{scope:"col"}},[t._v("Precio de Venta")]),t._v(" "),r("th",{staticClass:"text-center",attrs:{scope:"col"}},[r("i",{staticClass:"icon-settings"})])])])}],!1,null,null,null);e.default=b.exports},j5wz:function(t,e,r){"use strict";r.r(e);var n=r("o0o1"),a=r.n(n),c=r("L2JU"),s=r("ta7f");function o(t,e,r,n,a,c,s){try{var o=t[c](s),i=o.value}catch(t){return void r(t)}o.done?e(i):Promise.resolve(i).then(n,a)}function i(t){return function(){var e=this,r=arguments;return new Promise((function(n,a){var c=t.apply(e,r);function s(t){o(c,n,a,s,i,"next",t)}function i(t){o(c,n,a,s,i,"throw",t)}s(void 0)}))}}function u(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function l(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?u(Object(r),!0).forEach((function(e){d(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function d(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var p={components:{CategoriesSelect:function(){return Promise.all([r.e(0),r.e(17),r.e(8)]).then(r.bind(null,"nOIE"))},NewProductAttributes:function(){return Promise.all([r.e(0),r.e(17),r.e(8)]).then(r.bind(null,"MELZ"))},UploadImages:function(){return Promise.all([r.e(0),r.e(17),r.e(8)]).then(r.bind(null,"EVUX"))}},data:function(){return{images:[],submitted:!1,model:"products",model_name:"producto"}},validations:function(){return{selected_product:{name:{required:s.required},price:{required:s.required,decimal:s.decimal},cost_price:{required:s.required,decimal:s.decimal}}}},computed:l(l({},Object(c.b)(["isLoading","selected_product","page","categoriesAll","selected_category"])),{},{hasId:function(){return Boolean(this.hasSelectedId())},getTitle:function(){return this.hasSelectedId()?"Editar Producto":"Crear Producto"},buttonText:function(){return this.hasSelectedId()?"Actualizar Producto":"Crear Producto"}}),methods:{hasSelectedId:function(){return!!Boolean(this.selected_product)&&Boolean(this.selected_product.id>0)},handleSubmit:function(t){var e=this;return i(a.a.mark((function r(){return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t.preventDefault(),e.submitted=!0,e.$v.$touch(),!e.$v.$invalid){r.next=5;break}return r.abrupt("return");case 5:if(!e.hasSelectedId()){r.next=10;break}return r.next=8,e.update();case 8:r.next=12;break;case 10:return r.next=12,e.store();case 12:case"end":return r.stop()}}),r)})))()},store:function(){var t=this;return i(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("store",{model:t.model,data:{name:t.selected_product.name,price:t.selected_product.price,cost_price:t.selected_product.cost_price,category_id:t.selected_category.id,stocks:t.selected_product.stocks,images:t.selected_product.images}}).then(function(){var e=i(a.a.mark((function e(r){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.$v.$reset(),t.$toasted.global.ToastedSuccess({message:"El ".concat(t.model_name," fue creado!")}),t.$store.commit("SET_SELECTED_PRODUCT"),t.$refs.uploadImages.miniatureImages=[],t.$refs.categorySelect.value=null;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return t.$toasted.global.ToastedError({message:e.message.response.data.errors.name})}));case 2:case"end":return e.stop()}}),e)})))()},update:function(){var t=this;return i(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("update",{model:t.model,data:{_method:"PUT",id:t.selected_product.id,name:t.selected_product.name,price:t.selected_product.price,cost_price:t.selected_product.cost_price,category_id:t.selected_category.id,stocks:t.selected_product.stocks,images:t.selected_product.images}}).then(function(){var e=i(a.a.mark((function e(r){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.$v.$reset(),t.$toasted.global.ToastedSuccess({message:"El ".concat(t.model_name," fue actualizado!")}),t.$router.push({name:"productIndex"});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return t.$toasted.global.ToastedError({message:e.message.message})}));case 2:case"end":return e.stop()}}),e)})))()},cancelSelectedObject:function(){var t=this;return i(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.$v.$reset(),e.next=3,t.$store.commit("SET_SELECTED_PRODUCT");case 3:return e.next=5,t.$store.commit("SET_SELECTED_CATEGORY");case 5:t.$router.go(-1);case 6:case"end":return e.stop()}}),e)})))()},onUploadImages:function(t){this.selected_product.images=t||[]}}},m=r("KHd+"),f=Object(m.a)(p,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{class:{"card card-accent-warning":t.hasId,"card card-accent-primary":!t.hasId}},[r("div",{staticClass:"card-header"},[r("i",{class:{"icon-settings":t.hasId,"icon-plus":!t.hasId}}),t._v("\n        "+t._s(t.getTitle)+"\n        "),r("span",{staticClass:"float-right"},[t.hasId?r("span",{staticClass:"badge badge-warning"},[t._v("\n            ID\n            "),r("strong",[t._v(t._s(t.selected_product.id))])]):t._e(),t._v(" "),t.hasId?r("span",{staticClass:"ml-1"},[r("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"alert","aria-label":"Close"},on:{click:function(e){return t.cancelSelectedObject()}}},[r("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])]):t._e()])]),t._v(" "),r("div",{staticClass:"card-body"},[r("form",{attrs:{method:"POST","accept-charset":"UTF-8"},on:{submit:t.handleSubmit}},[r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"name"}},[t._v("Nombre")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.selected_product.name,expression:"selected_product.name"},{name:"capitalize",rawName:"v-capitalize"}],staticClass:"form-control",class:{"is-invalid":t.submitted&&t.$v.selected_product.name.$error},attrs:{type:"text",id:"name",name:"name"},domProps:{value:t.selected_product.name},on:{input:function(e){e.target.composing||t.$set(t.selected_product,"name",e.target.value)}}}),t._v(" "),t.submitted&&!t.$v.selected_product.name.required?r("div",{staticClass:"invalid-feedback"},[t._v("El nombre es\n                    requerido.\n                ")]):t._e()]),t._v(" "),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"name"}},[t._v("Precio de Venta")]),t._v(" "),r("currency-input",{staticClass:"form-control",class:{"is-invalid":t.submitted&&t.$v.selected_product.price.$error},attrs:{value:t.selected_product.price,id:"price",name:"price"},model:{value:t.selected_product.price,callback:function(e){t.$set(t.selected_product,"price",e)},expression:"selected_product.price"}}),t._v(" "),t.submitted&&!t.$v.selected_product.price.required?r("div",{staticClass:"invalid-feedback"},[t._v("El precio es\n                    requerido.\n                ")]):t._e(),t._v(" "),t.submitted&&!t.$v.selected_product.price.decimal?r("div",{staticClass:"invalid-feedback"},[t._v("El precio debe\n                    ser númerico.\n                ")]):t._e()],1),t._v(" "),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"name"}},[t._v("Precio de Costo")]),t._v(" "),r("currency-input",{staticClass:"form-control",class:{"is-invalid":t.submitted&&t.$v.selected_product.cost_price.$error},attrs:{value:t.selected_product.cost_price,id:"cost_price",name:"cost_price"},model:{value:t.selected_product.cost_price,callback:function(e){t.$set(t.selected_product,"cost_price",e)},expression:"selected_product.cost_price"}}),t._v(" "),t.submitted&&!t.$v.selected_product.cost_price.required?r("div",{staticClass:"invalid-feedback"},[t._v("El precio\n                    es requerido.\n                ")]):t._e(),t._v(" "),t.submitted&&!t.$v.selected_product.cost_price.decimal?r("div",{staticClass:"invalid-feedback"},[t._v("El precio\n                    debe ser númerico.\n                ")]):t._e()],1),t._v(" "),r("div",{staticClass:"form-group"},[r("label",[t._v("Categoría")]),t._v(" "),r("categories-select",{ref:"categorySelect"})],1),t._v(" "),r("div",{staticClass:"form-group"},[r("new-product-attributes")],1),t._v(" "),r("upload-images",{ref:"uploadImages",attrs:{editImages:t.selected_product.images},on:{"on-upload-images":t.onUploadImages}}),t._v(" "),r("div",{staticClass:"form-group"},[r("div",[r("button",{class:{invalid:t.$v.$invalid,"btn btn-warning btn-block":t.hasId,"btn btn-success btn-block":!t.hasId},attrs:{type:"submit"}},[t._v("\n                        "+t._s(t.buttonText)+"\n                    ")]),t._v(" "),r("button",{staticClass:"btn btn-secondary btn-block",attrs:{type:"button"},on:{click:function(e){return t.cancelSelectedObject()}}},[t._v("\n                        Cancelar\n                    ")])])])],1)])])}),[],!1,null,null,null);e.default=f.exports},nOIE:function(t,e,r){"use strict";r.r(e);var n=r("o0o1"),a=r.n(n),c=r("yhet"),s=r.n(c),o=(r("VCwm"),r("L2JU"));function i(t,e,r,n,a,c,s){try{var o=t[c](s),i=o.value}catch(t){return void r(t)}o.done?e(i):Promise.resolve(i).then(n,a)}function u(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function l(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?u(Object(r),!0).forEach((function(e){d(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function d(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var p={components:{Treeselect:s.a},props:{multiple:{type:Boolean,default:!1}},data:function(){return{value:null,model:"categories"}},mounted:function(){this.fetchAll(),this.selected_category.id&&(this.value=this.selected_category)},computed:l(l({},Object(o.b)(["isLoading","categoriesAll","selected_category","selected_category"])),{},{hasCategories:function(){return Boolean(this.categoriesAll.length>0)},getCategories:function(){return this.categoriesAll}}),watch:{value:function(t){this.$store.commit("SET_SELECTED_CATEGORY",t)}},methods:{fetchAll:function(){var t,e=this;return(t=a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("fetchAll",{model:e.model}).catch((function(t){return e.$toasted.global.ToastedError({message:t.message.message})}));case 2:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,a){var c=t.apply(e,r);function s(t){i(c,n,a,s,o,"next",t)}function o(t){i(c,n,a,s,o,"throw",t)}s(void 0)}))})()},normalizer:function(t){return{id:t.id,label:t.name,children:t.children}}}},m=r("KHd+"),f=Object(m.a)(p,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("treeselect",{attrs:{placeholder:"Seleccione una categoría",multiple:t.multiple,defaultExpandLevel:1,noResultsText:"No se encontraron resultados",noOptionsText:"No existe categoría",noChildrenText:"Fin de la subcategoría",normalizer:t.normalizer,required:"",valueFormat:"object",options:t.getCategories},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})}),[],!1,null,null,null);e.default=f.exports},qSuy:function(t,e,r){"use strict";r.r(e);var n=r("o0o1"),a=r.n(n),c=r("ta7f");function s(t,e,r,n,a,c,s){try{var o=t[c](s),i=o.value}catch(t){return void r(t)}o.done?e(i):Promise.resolve(i).then(n,a)}function o(t){return function(){var e=this,r=arguments;return new Promise((function(n,a){var c=t.apply(e,r);function o(t){s(c,n,a,o,i,"next",t)}function i(t){s(c,n,a,o,i,"throw",t)}o(void 0)}))}}var i={props:{},data:function(){return{submitted:!1,term:"",model:"products"}},validations:function(){return{term:{required:c.required}}},methods:{handleSubmit:function(t){var e=this;return o(a.a.mark((function r(){return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t.preventDefault(),e.submitted=!0,e.$v.$touch(),!e.$v.$invalid){r.next=5;break}return r.abrupt("return");case 5:e.fetch();case 6:case"end":return r.stop()}}),r)})))()},clearFilter:function(){this.term=null,this.fetch()},fetch:function(){var t=this;return o(a.a.mark((function e(){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r={page:1,model:t.model}).term=t.term,e.next=4,t.$store.dispatch("fetch",r).catch((function(e){return t.$toasted.global.ToastedError({message:e.message.message})}));case 4:case"end":return e.stop()}}),e)})))()}}},u=r("KHd+"),l=Object(u.a)(i,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("form",{attrs:{method:"POST","accept-charset":"UTF-8"},on:{submit:t.handleSubmit}},[r("div",{staticClass:"input-prepend input-group"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.term,expression:"term"}],staticClass:"form-control",attrs:{id:"prependedInput",size:"16",type:"text",placeholder:"Buscar producto por nombre"},domProps:{value:t.term},on:{input:function(e){e.target.composing||(t.term=e.target.value)}}}),t._v(" "),r("span",{staticClass:"input-group-append"},[r("button",{staticClass:"btn btn-outline-primary",attrs:{type:"submit",disabled:t.$v.$invalid}},[r("i",{staticClass:"icon-magnifier"}),t._v(" Buscar\n\t\t\t\t")])]),t._v(" "),r("span",{staticClass:"input-group-append",attrs:{title:"Quitar filtro"}},[t.$v.$invalid?t._e():r("button",{staticClass:"btn btn-outline-primary",attrs:{type:"button",disabled:t.$v.$invalid},on:{click:function(e){return t.clearFilter()}}},[r("i",{staticClass:"icon-close"})])])])])}),[],!1,null,null,null);e.default=l.exports}}]);