(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{"1V+D":function(t,e){t.exports="/images/default-image.jpg?302725c5fc92a721aa64a13039bb867f"},"4bYf":function(t,e,r){(t.exports=r("I1BE")(!1)).push([t.i,".scrolling-wrapper[data-v-ce7199f8]{overflow-x:auto}",""])},LzZn:function(t,e,r){"use strict";r.r(e);var n=r("o0o1"),s=r.n(n),c=r("L2JU"),a=r("1V+D"),i=r.n(a);function o(t,e,r,n,s,c,a){try{var i=t[c](a),o=i.value}catch(t){return void r(t)}i.done?e(o):Promise.resolve(o).then(n,s)}function u(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function l(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var d={data:function(){return{image:i.a,model:"products",model_name:"producto",index:0}},computed:function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?u(Object(r),!0).forEach((function(e){l(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},Object(c.b)(["selected_product","selected_category"])),methods:{showImageByIndex:function(t){this.index=t},cancelSelectedObject:function(){var t,e=this;return(t=s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$store.commit("SET_SELECTED_PRODUCT");case 2:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,s){var c=t.apply(e,r);function a(t){o(c,n,s,a,i,"next",t)}function i(t){o(c,n,s,a,i,"throw",t)}a(void 0)}))})()}}},p=(r("XHlB"),r("KHd+")),f=Object(p.a)(d,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"card mb-3"},[t.selected_product.id?r("span",{staticClass:"mr-1"},[r("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"alert","aria-label":"Close"},on:{click:function(e){return t.cancelSelectedObject()}}},[r("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])]):t._e(),t._v(" "),r("div",{staticClass:"item-img-container"},[t.selected_product.images[t.index]?r("img",{staticClass:"card-img-top card-img-top-custom",attrs:{src:t.selected_product.id?t.selected_product.images[t.index]:t.selected_product.images[t.index].binary,alt:"Imagen"}}):r("img",{staticClass:"card-img-top card-img-top-custom",attrs:{src:t.image,alt:"Imagen"}})]),t._v(" "),t.selected_product.images&&t.selected_product.images.length>0?r("div",{staticClass:"container-fluid scrolling-wrapper justify-content-center"},[r("div",{staticClass:"row flex-row flex-nowrap"},t._l(t.selected_product.images,(function(e,n){return r("div",{key:n,staticClass:"col-3"},[r("figure",{staticClass:"figure d-inline-flex"},[r("img",{staticClass:"images-thumb-card",attrs:{src:t.selected_product.id?e:e.binary,alt:"..."},on:{click:function(e){return t.showImageByIndex(n)}}})])])})),0)]):t._e(),t._v(" "),r("div",{staticClass:"card-body mb-0"},[r("h5",{staticClass:"card-title text-truncate"},[t._v(t._s(t.selected_product.name?t.selected_product.name:"-"))]),t._v(" "),r("hr"),t._v(" "),r("div",{staticClass:"w-100"},[r("p",{staticClass:"mb-0"},[t._v("Categoría:")]),t._v(" "),t.selected_category.id?r("h5",{staticClass:"text-truncate"},[t._v(t._s(t.selected_category.name))]):r("h5",{staticClass:"text-truncate"},[t._v("-")])]),t._v(" "),r("div",{staticClass:"w-100"},[r("p",{staticClass:"mb-0"},[t._v("Precio de Venta:")]),t._v(" "),t.selected_product.price?r("h5",{staticClass:"text-truncate"},[t._v(t._s(t._f("currency")(t.selected_product.price)))]):r("h5",{staticClass:"text-truncate"},[t._v("-")])]),t._v(" "),r("div",{staticClass:"w-100"},[r("p",{staticClass:"mb-0"},[t._v("Precio de Costo:")]),t._v(" "),t.selected_product.cost_price?r("h5",{staticClass:"text-truncate"},[t._v("\n                "+t._s(t._f("currency")(t.selected_product.cost_price)))]):r("h5",{staticClass:"text-truncate"},[t._v("-")])]),t._v(" "),r("div",{staticClass:"scroll-vertical justify-content-center"},t._l(t.selected_product.attributes,(function(e,n){return r("div",{key:n,staticClass:"text-center"},[t._l(e,(function(e,n){return r("div",{key:n},t._l(e,(function(n,s){return e.length?r("div",{key:s},[t._v("\n                        "+t._s(n.attribute)+": "+t._s(n.value)+"\n                    ")]):t._e()})),0)})),t._v("\n                Stock: "+t._s(e.stock)+"\n                "),r("hr")],2)})),0)])])}),[],!1,null,"ce7199f8",null);e.default=f.exports},"Nl+V":function(t,e,r){"use strict";r.r(e);var n=r("o0o1"),s=r.n(n),c=r("L2JU"),a=r("kGIl"),i=r.n(a),o=(r("5A0h"),r("PSD3")),u=r.n(o),l=r("LvDl");function d(t,e,r,n,s,c,a){try{var i=t[c](a),o=i.value}catch(t){return void r(t)}i.done?e(o):Promise.resolve(o).then(n,s)}function p(t){return function(){var e=this,r=arguments;return new Promise((function(n,s){var c=t.apply(e,r);function a(t){d(c,n,s,a,i,"next",t)}function i(t){d(c,n,s,a,i,"throw",t)}a(void 0)}))}}function f(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function v(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?f(Object(r),!0).forEach((function(e){m(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function m(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var b={components:{Loading:i.a},props:{},data:function(){return{opacity:.3,model:"purchases",model_name:"producto",isHovering:!1}},created:function(){},mounted:function(){this.fetch()},computed:v(v({},Object(c.b)(["products","isLoading","page"])),{},{page:{set:function(t){this.$store.state.page=t},get:function(){return this.$store.state.page}},hasProducts:function(){return Boolean(this.products.data)},getProducts:function(){return this.orderedObjects()},getLastPage:function(){return this.products.last_page},getTotal:function(){return this.products.total}}),methods:{orderedObjects:function(){return Object(l.orderBy)(this.products.data,"id")},handleSubmitDelete:function(t,e){var r=this;return p(s.a.mark((function n(){return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t.preventDefault(),!(!e.id>0)){n.next=3;break}return n.abrupt("return");case 3:return n.next=5,r.delete(e);case 5:case"end":return n.stop()}}),n)})))()},fetch:function(){var t=this;return p(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("fetchProductsWithStock",{model:"products",page:t.page}).catch((function(e){return t.$toasted.global.ToastedError({message:e.message.message})}));case 2:case"end":return e.stop()}}),e)})))()},getAttributesIds:function(t){return p(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",[]);case 2:return e.abrupt("return",t.map((function(t){return t.id})));case 3:case"end":return e.stop()}}),e)})))()},clickCallback:function(t){var e=this;return p(s.a.mark((function r(){return s.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.$store.commit("SET_PAGE",t);case 2:return r.next=4,e.fetch();case 4:case"end":return r.stop()}}),r)})))()},showProduct:function(t){var e=this;return p(s.a.mark((function r(){return s.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.selectProductAndCategory(t);case 2:case"end":return r.stop()}}),r)})))()},editProduct:function(t){var e=this;return p(s.a.mark((function r(){return s.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.selectProductAndCategory(t);case 2:return r.next=4,e.$router.push({name:"productForm"});case 4:case"end":return r.stop()}}),r)})))()},selectProductAndCategory:function(t){var e=this;return p(s.a.mark((function r(){return s.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=e.$store,r.t1=t.id,r.t2=t.name,r.t3=Number(t.price),r.t4=Number(t.cost_price),r.t5=t.images,r.t6=t.attributes,r.next=9,e.getStockProduct(t);case 9:return r.t7=r.sent,r.t8={id:r.t1,name:r.t2,price:r.t3,cost_price:r.t4,images:r.t5,attributes:r.t6,stocks:r.t7},r.next=13,r.t0.commit.call(r.t0,"SET_SELECTED_PRODUCT",r.t8);case 13:return r.next=15,e.$store.commit("SET_SELECTED_CATEGORY",{id:t.category.id,name:t.category.name,children:t.category.children,attributesIds:t.category.attributesIds});case 15:case"end":return r.stop()}}),r)})))()},getStockProduct:function(t){return p(s.a.mark((function e(){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],e.next=3,t.attributes.forEach((function(t){var e={};t.attributes.forEach((function(t){e[t.attribute]=[],e[t.attribute][0]=t.value_id})),e.stock=Number(t.stock),r.push(e)}));case 3:return e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})))()},sellProduct:function(t,e){var r=this;return p(s.a.mark((function n(){var c;return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c="",n.next=3,e.attributes.forEach((function(t){return c+="".concat(t.attribute,": <b>").concat(t.value,"</b>\n")}));case 3:return c=c.substring(0,c.length-2),n.next=6,u.a.fire({title:"Venta De Producto",text:"Algo",html:"¿Está seguro que desea vender <b> ".concat(t.name,'</b> con las siguientes características?<pre class="mt-3"> ').concat(c," </pre>"),type:"question",showCancelButton:!0,confirmButtonText:'Si, vender! <i class="icon-like"></i>',cancelButtonText:"Cancelar"}).then((function(n){n.isConfirmed&&r.$store.dispatch("store",{model:r.model,data:{products:[{product_id:t.id,attributes:e,quantity:1}]}}).then((function(t){t&&r.fetch()}))}));case 6:case"end":return n.stop()}}),n)})))()}}},h=r("KHd+"),g=Object(h.a)(b,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"table-responsive"},[r("loading",{attrs:{opacity:t.opacity,loader:"spinner",transition:"fade",active:t.isLoading,"can-cancel":!1,"is-full-page":!0,color:"#20a8d8","background-color":"rgba(0,0,0,0.8)"},on:{"update:active":function(e){t.isLoading=e}}}),t._v(" "),r("table",{staticClass:"table table-condensed table-striped table-hover",attrs:{id:"products-table"}},[t._m(0),t._v(" "),t.hasProducts?r("tbody",[t._l(t.getProducts,(function(e){return[t._l(e.attributes,(function(n){return[n.stock>0?r("tr",[r("td",{class:{"table-danger":t.model.deleted_at,hovering:t.isHovering},attrs:{scope:"row"},on:{click:function(r){return t.showProduct(e)},mouseover:function(e){t.isHovering=!0},mouseout:function(e){t.isHovering=!1}}},[t._v(t._s(e.id)+"\n                    ")]),t._v(" "),r("td",{class:{"table-danger":t.model.deleted_at,hovering:t.isHovering},attrs:{scope:"row"},on:{click:function(r){return t.showProduct(e)},mouseover:function(e){t.isHovering=!0},mouseout:function(e){t.isHovering=!1}}},[t._v(t._s(e.name)+"\n                    ")]),t._v(" "),r("td",{attrs:{scope:"row"}},t._l(n.attributes,(function(e){return r("h6",{staticClass:"mb-0"},[t._v("\n                        "+t._s(e.attribute)+": "),r("b",[t._v(t._s(e.value))])])})),0),t._v(" "),r("td",{attrs:{scope:"row"}},[t._v(t._s(n.stock))]),t._v(" "),r("td",{attrs:{scope:"row"}},[t._v(t._s(t._f("currency")(e.price)))]),t._v(" "),r("td",{staticClass:"text-center"},[r("button",{staticClass:"btn btn-primary btn-sm",attrs:{type:"button",title:"sell"},on:{click:function(r){return t.sellProduct(e,n)}}},[t._v("\n                            VENDER\n                        ")])])]):t._e()]}))]}))],2):t._e()]),t._v(" "),t.hasProducts?r("section",{staticClass:"col-lg-12 col-sm-12 col-md-12 col-xs-12 center-block text-center d-flex justify-content-center"},[r("paginate",{attrs:{"page-count":t.getLastPage,"page-range":5,"margin-pages":2,"click-handler":t.clickCallback,"prev-text":"&laquo;","next-text":"&raquo;","container-class":"pagination","page-class":"page-item","page-link-class":"page-link","prev-class":"page-item","next-class":"page-item","prev-link-class":"page-link","next-link-class":"page-link","active-class":"active"},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}})],1):t._e()],1)}),[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("thead",{staticClass:"thead-dark"},[r("tr",[r("th",{attrs:{scope:"col"}},[t._v("Código")]),t._v(" "),r("th",{attrs:{scope:"col"}},[t._v("Producto")]),t._v(" "),r("th",{attrs:{scope:"col"}},[t._v("Carácteristicas")]),t._v(" "),r("th",{attrs:{scope:"col"}},[t._v("Stock")]),t._v(" "),r("th",{attrs:{scope:"col"}},[t._v("Precio")]),t._v(" "),r("th",{staticClass:"text-center",attrs:{scope:"col"}},[r("i",{staticClass:"icon-settings"})])])])}],!1,null,null,null);e.default=g.exports},XHlB:function(t,e,r){"use strict";r("dG70")},dG70:function(t,e,r){var n=r("4bYf");"string"==typeof n&&(n=[[t.i,n,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};r("aET+")(n,s);n.locals&&(t.exports=n.locals)},ef6w:function(t,e,r){"use strict";r.r(e);var n=r("L2JU");function s(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function c(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var a={components:{PurchasesOrdersList:function(){return r.e(10).then(r.bind(null,"p9ur"))},PurchasesOrdersFilter:function(){return r.e(10).then(r.bind(null,"MnWS"))},PurchaseInfo:function(){return r.e(10).then(r.bind(null,"g39F"))},PaymentInfo:function(){return r.e(10).then(r.bind(null,"YcNB"))},CustomerInfo:function(){return r.e(10).then(r.bind(null,"M1FO"))},PurchaseProductsList:function(){return r.e(10).then(r.bind(null,"IaT7"))}},computed:function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?s(Object(r),!0).forEach((function(e){c(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},Object(n.b)(["isLoading","selected_purchase"]))},i=r("KHd+"),o=Object(i.a)(a,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",[this.selected_purchase.id?e("div",{staticClass:"row"},[e("div",{staticClass:"col-sm-12 col-xs-12"},[e("purchase-products-list")],1),this._v(" "),e("div",{staticClass:"col-sm-4 col-xs-4"},[e("purchase-info")],1),this._v(" "),e("div",{staticClass:"col-sm-4 col-xs-4"},[e("payment-info")],1),this._v(" "),e("div",{staticClass:"col-sm-4 col-xs-4"},[e("customer-info")],1)]):e("div",{staticClass:"row"},[e("div",{staticClass:"col-sm-12 col-xs-12"},[e("div",{staticClass:"card card-accent-primary"},[this._m(0),this._v(" "),e("div",{staticClass:"card-body"},[e("div",{staticClass:"row justify-content-end mb-4"},[e("div",{staticClass:"col-lg-6 col-md-8 col-sm-12 col-xs-12"},[e("purchases-orders-filter")],1)]),this._v(" "),e("purchases-orders-list")],1)])])])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"card-header d-flex justify-content-between align-items-center"},[e("div",{staticClass:"align-item-center"},[e("i",{staticClass:"icon-list"}),this._v("\n                        Ordenes de Compra\n                    ")])])}],!1,null,null,null);e.default=o.exports},qSuy:function(t,e,r){"use strict";r.r(e);var n=r("o0o1"),s=r.n(n),c=r("ta7f");function a(t,e,r,n,s,c,a){try{var i=t[c](a),o=i.value}catch(t){return void r(t)}i.done?e(o):Promise.resolve(o).then(n,s)}function i(t){return function(){var e=this,r=arguments;return new Promise((function(n,s){var c=t.apply(e,r);function i(t){a(c,n,s,i,o,"next",t)}function o(t){a(c,n,s,i,o,"throw",t)}i(void 0)}))}}var o={props:{},data:function(){return{submitted:!1,term:"",model:"products"}},validations:function(){return{term:{required:c.required}}},methods:{handleSubmit:function(t){var e=this;return i(s.a.mark((function r(){return s.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t.preventDefault(),e.submitted=!0,e.$v.$touch(),!e.$v.$invalid){r.next=5;break}return r.abrupt("return");case 5:e.fetch();case 6:case"end":return r.stop()}}),r)})))()},clearFilter:function(){this.term=null,this.fetch()},fetch:function(){var t=this;return i(s.a.mark((function e(){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r={page:1,model:t.model}).term=t.term,e.next=4,t.$store.dispatch("fetch",r).catch((function(e){return t.$toasted.global.ToastedError({message:e.message.message})}));case 4:case"end":return e.stop()}}),e)})))()}}},u=r("KHd+"),l=Object(u.a)(o,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("form",{attrs:{method:"POST","accept-charset":"UTF-8"},on:{submit:t.handleSubmit}},[r("div",{staticClass:"input-prepend input-group"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.term,expression:"term"}],staticClass:"form-control",attrs:{id:"prependedInput",size:"16",type:"text",placeholder:"Buscar producto por nombre"},domProps:{value:t.term},on:{input:function(e){e.target.composing||(t.term=e.target.value)}}}),t._v(" "),r("span",{staticClass:"input-group-append"},[r("button",{staticClass:"btn btn-outline-primary",attrs:{type:"submit",disabled:t.$v.$invalid}},[r("i",{staticClass:"icon-magnifier"}),t._v(" Buscar\n\t\t\t\t")])]),t._v(" "),r("span",{staticClass:"input-group-append",attrs:{title:"Quitar filtro"}},[t.$v.$invalid?t._e():r("button",{staticClass:"btn btn-outline-primary",attrs:{type:"button",disabled:t.$v.$invalid},on:{click:function(e){return t.clearFilter()}}},[r("i",{staticClass:"icon-close"})])])])])}),[],!1,null,null,null);e.default=l.exports},qmD9:function(t,e,r){"use strict";r.r(e);var n=r("L2JU");function s(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function c(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var a={components:{PurchasesList:function(){return Promise.all([r.e(0),r.e(18),r.e(9)]).then(r.bind(null,"Nl+V"))},ProductsFilters:function(){return Promise.all([r.e(0),r.e(18),r.e(9)]).then(r.bind(null,"qSuy"))},ProductsCard:function(){return Promise.all([r.e(0),r.e(18),r.e(9)]).then(r.bind(null,"LzZn"))}},data:function(){return{}},created:function(){},mounted:function(){},computed:function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?s(Object(r),!0).forEach((function(e){c(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},Object(n.b)(["isLoading","selected_product"])),methods:{}},i=r("KHd+"),o=Object(i.a)(a,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"row"},[e("div",{staticClass:"col-sm-12 col-xs-12",class:{"col-lg-9 col-md-9":this.selected_product.id,"col-lg-12 col-md-12":!this.selected_product.id}},[e("div",{staticClass:"card card-accent-primary"},[this._m(0),this._v(" "),e("div",{staticClass:"card-body"},[e("div",{staticClass:"row justify-content-end mb-4"},[e("div",{staticClass:"col-lg-6 col-md-8 col-sm-12 col-xs-12"},[e("products-filters")],1)]),this._v(" "),e("purchases-list")],1)])]),this._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:this.selected_product.id,expression:"selected_product.id"}],staticClass:"col-lg-3 col-md-12 col-sm-12 col-xs-12"},[e("products-card")],1)])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"card-header d-flex justify-content-between align-items-center"},[e("div",{staticClass:"align-item-center"},[e("i",{staticClass:"icon-list"}),this._v("\n                Ventas\n                ")])])}],!1,null,null,null);e.default=o.exports}}]);